<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üîÆ Life Decoder Pro V3 - Num√©rologie & Timing Sacr√©</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    :root {
      --gold: #d4af37;
      --gold-light: #f4e4a6;
      --gold-dark: #a88a2a;
      --purple-deep: #0d0515;
      --purple-mid: #1a0a2e;
      --purple-accent: #6b3fa0;
      --mystic-blue: #4a5fd9;
      --cosmic-teal: #2dd4bf;
      --text: #e8e0f0;
      --text-dim: #9a8eb8;
      --card-bg: rgba(26, 10, 46, 0.7);
    }
    
    body {
      font-family: 'Cormorant Garamond', Georgia, serif;
      background: var(--purple-deep);
      min-height: 100vh;
      color: var(--text);
      overflow-x: hidden;
      font-size: 18px;
    }
    
    /* Animated Background */
    .bg-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      overflow: hidden;
    }
    
    .stars {
      position: absolute;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(2px 2px at 20px 30px, #fff, transparent),
        radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), transparent),
        radial-gradient(1px 1px at 90px 40px, #fff, transparent),
        radial-gradient(2px 2px at 160px 120px, var(--gold-light), transparent),
        radial-gradient(1px 1px at 200px 50px, #fff, transparent),
        radial-gradient(2px 2px at 350px 100px, var(--gold-light), transparent),
        radial-gradient(1px 1px at 450px 90px, #fff, transparent),
        radial-gradient(1px 1px at 80px 150px, rgba(255,255,255,0.6), transparent),
        radial-gradient(2px 2px at 280px 180px, var(--gold), transparent),
        radial-gradient(1px 1px at 520px 60px, #fff, transparent);
      background-size: 550px 200px;
      animation: twinkle 6s ease-in-out infinite alternate;
    }
    
    @keyframes twinkle {
      0% { opacity: 0.7; }
      100% { opacity: 1; }
    }
    
    .nebula {
      position: absolute;
      width: 150%;
      height: 150%;
      top: -25%;
      left: -25%;
      background: 
        radial-gradient(ellipse at 20% 20%, rgba(107, 63, 160, 0.15) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 80%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
        radial-gradient(ellipse at 60% 30%, rgba(74, 95, 217, 0.1) 0%, transparent 40%);
      animation: nebula-drift 30s ease-in-out infinite alternate;
    }
    
    @keyframes nebula-drift {
      0% { transform: translate(0, 0) rotate(0deg); }
      100% { transform: translate(5%, 5%) rotate(5deg); }
    }
    
    /* Sacred Geometry */
    .sacred-circle {
      position: fixed;
      width: 600px;
      height: 600px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      opacity: 0.03;
      pointer-events: none;
      z-index: 0;
    }
    
    .sacred-circle svg {
      width: 100%;
      height: 100%;
      animation: slow-rotate 120s linear infinite;
    }
    
    @keyframes slow-rotate {
      to { transform: rotate(360deg); }
    }
    
    /* Main Container */
    .container {
      position: relative;
      z-index: 1;
      max-width: 1000px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }
    
    /* Header */
    header {
      text-align: center;
      padding: 2rem 0 3rem;
    }
    
    .logo-container {
      position: relative;
      display: inline-block;
    }
    
    .logo-symbol {
      font-size: 5rem;
      animation: float-glow 4s ease-in-out infinite;
    }
    
    .logo-ring {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 120px;
      height: 120px;
      transform: translate(-50%, -50%);
      border: 2px solid var(--gold);
      border-radius: 50%;
      opacity: 0.3;
      animation: pulse-ring 3s ease-in-out infinite;
    }
    
    @keyframes float-glow {
      0%, 100% { 
        transform: translateY(0);
        filter: drop-shadow(0 0 20px var(--gold));
      }
      50% { 
        transform: translateY(-10px);
        filter: drop-shadow(0 0 40px var(--gold)) drop-shadow(0 0 60px var(--purple-accent));
      }
    }
    
    @keyframes pulse-ring {
      0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.3; }
      50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.1; }
    }
    
    h1 {
      font-family: 'Cinzel', serif;
      font-size: 3rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--gold-light) 0%, var(--gold) 50%, var(--gold-dark) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      margin: 1rem 0 0.5rem;
    }
    
    .version-badge {
      display: inline-block;
      background: linear-gradient(135deg, var(--cosmic-teal), var(--mystic-blue));
      padding: 0.3rem 0.8rem;
      border-radius: 20px;
      font-size: 0.7rem;
      font-family: 'Cinzel', serif;
      letter-spacing: 0.1em;
      margin-bottom: 0.5rem;
    }
    
    .subtitle {
      font-style: italic;
      color: var(--text-dim);
      font-size: 1.3rem;
      letter-spacing: 0.1em;
    }
    
    .powered-by {
      margin-top: 0.8rem;
      font-size: 0.85rem;
      color: var(--text-dim);
    }
    
    .powered-by span {
      color: var(--gold);
      font-weight: 600;
    }
    
    /* Panels */
    .panel {
      background: linear-gradient(135deg, var(--card-bg) 0%, rgba(13, 5, 21, 0.9) 100%);
      border: 1px solid rgba(212, 175, 55, 0.2);
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 1.5rem;
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
    }
    
    .panel::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
      opacity: 0.5;
    }
    
    .panel.timing-panel::before {
      background: linear-gradient(90deg, transparent, var(--cosmic-teal), transparent);
    }
    
    .panel-title {
      font-family: 'Cinzel', serif;
      font-size: 1.2rem;
      color: var(--gold);
      margin-bottom: 1.5rem;
      letter-spacing: 0.15em;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.8rem;
    }
    
    .panel-title.teal {
      color: var(--cosmic-teal);
    }
    
    .panel-subtitle {
      text-align: center;
      color: var(--text-dim);
      font-size: 0.95rem;
      margin-top: -1rem;
      margin-bottom: 1.5rem;
      font-style: italic;
    }
    
    /* API Section */
    .api-section {
      display: flex;
      gap: 0.8rem;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .api-section input {
      flex: 1;
      min-width: 200px;
      padding: 0.9rem 1.2rem;
      border: 1px solid rgba(212, 175, 55, 0.3);
      border-radius: 10px;
      background: rgba(0, 0, 0, 0.4);
      color: var(--text);
      font-family: 'Cormorant Garamond', serif;
      font-size: 1rem;
      transition: all 0.3s;
    }
    
    .api-section input:focus {
      outline: none;
      border-color: var(--gold);
      box-shadow: 0 0 20px rgba(212, 175, 55, 0.2);
    }
    
    .btn-gold {
      padding: 0.9rem 1.8rem;
      background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
      border: none;
      border-radius: 10px;
      color: var(--purple-deep);
      font-family: 'Cinzel', serif;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s;
      letter-spacing: 0.05em;
    }
    
    .btn-gold:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
    }
    
    /* Input Form */
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 1.5rem;
    }
    
    .form-grid.compact {
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 1rem;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .form-group.full-width {
      grid-column: 1 / -1;
    }
    
    .form-group label {
      font-family: 'Cinzel', serif;
      font-size: 0.85rem;
      color: var(--gold);
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }
    
    .form-group label.teal {
      color: var(--cosmic-teal);
    }
    
    .form-group input, .form-group select, .form-group textarea {
      padding: 1rem;
      background: rgba(0, 0, 0, 0.4);
      border: 2px solid rgba(212, 175, 55, 0.2);
      border-radius: 10px;
      color: var(--text);
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.1rem;
      transition: all 0.3s;
    }
    
    .form-group textarea {
      min-height: 80px;
      resize: vertical;
    }
    
    .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
      outline: none;
      border-color: var(--gold);
      box-shadow: 0 0 20px rgba(212, 175, 55, 0.15);
    }
    
    .form-group.teal input:focus, .form-group.teal select:focus {
      border-color: var(--cosmic-teal);
      box-shadow: 0 0 20px rgba(45, 212, 191, 0.15);
    }
    
    .form-group select option {
      background: var(--purple-deep);
    }
    
    /* Numbers Display */
    .numbers-panel {
      display: none;
    }
    
    .numbers-panel.visible {
      display: block;
      animation: fadeSlideIn 0.6s ease;
    }
    
    @keyframes fadeSlideIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .numbers-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
      gap: 1rem;
    }
    
    .number-card {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(212, 175, 55, 0.2);
      border-radius: 12px;
      padding: 1rem;
      text-align: center;
      transition: all 0.3s;
      cursor: help;
      position: relative;
    }
    
    .number-card:hover {
      border-color: var(--gold);
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(212, 175, 55, 0.15);
    }
    
    .number-card.temporal {
      border-color: rgba(45, 212, 191, 0.3);
    }
    
    .number-card.temporal:hover {
      border-color: var(--cosmic-teal);
      box-shadow: 0 10px 30px rgba(45, 212, 191, 0.15);
    }
    
    .number-card .icon {
      font-size: 1.3rem;
      margin-bottom: 0.3rem;
    }
    
    .number-card .value {
      font-family: 'Cinzel', serif;
      font-size: 2.2rem;
      font-weight: 700;
      color: var(--gold);
      text-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
      line-height: 1;
    }
    
    .number-card.temporal .value {
      color: var(--cosmic-teal);
      text-shadow: 0 0 20px rgba(45, 212, 191, 0.5);
    }
    
    .number-card .value.master {
      color: var(--mystic-blue);
      text-shadow: 0 0 20px rgba(74, 95, 217, 0.5);
    }
    
    .number-card .label {
      font-size: 0.75rem;
      color: var(--text-dim);
      margin-top: 0.3rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .number-card .calculation {
      font-size: 0.65rem;
      color: var(--text-dim);
      margin-top: 0.4rem;
      padding-top: 0.4rem;
      border-top: 1px solid rgba(255,255,255,0.1);
      font-family: monospace;
      opacity: 0.7;
    }
    
    .master-badge {
      position: absolute;
      top: -8px;
      right: -8px;
      background: linear-gradient(135deg, var(--mystic-blue), var(--purple-accent));
      color: #fff;
      font-size: 0.55rem;
      padding: 0.2rem 0.4rem;
      border-radius: 10px;
      font-family: 'Cinzel', serif;
    }
    
    /* Section Headers */
    .section-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      margin: 2.5rem 0 1.5rem;
      color: var(--gold);
      font-family: 'Cinzel', serif;
      font-size: 0.9rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
    }
    
    .section-header.teal {
      color: var(--cosmic-teal);
    }
    
    .section-header::before,
    .section-header::after {
      content: '';
      flex: 1;
      height: 1px;
      background: linear-gradient(90deg, transparent, currentColor, transparent);
      opacity: 0.4;
    }
    
    /* Analyses Grid */
    .analyses-section {
      margin-bottom: 1rem;
    }
    
    .analyses-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1rem;
    }
    
    .analysis-card {
      background: linear-gradient(135deg, rgba(26, 10, 46, 0.8) 0%, rgba(13, 5, 21, 0.95) 100%);
      border: 1px solid rgba(212, 175, 55, 0.15);
      border-radius: 16px;
      padding: 1.5rem;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: relative;
      overflow: hidden;
    }
    
    .analysis-card.timing-card {
      border-color: rgba(45, 212, 191, 0.2);
      background: linear-gradient(135deg, rgba(13, 35, 35, 0.8) 0%, rgba(13, 5, 21, 0.95) 100%);
    }
    
    .analysis-card::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);
      transition: left 0.5s;
    }
    
    .analysis-card.timing-card::after {
      background: linear-gradient(90deg, transparent, rgba(45, 212, 191, 0.1), transparent);
    }
    
    .analysis-card:hover {
      transform: translateY(-5px) scale(1.02);
      border-color: var(--gold);
      box-shadow: 0 15px 40px rgba(212, 175, 55, 0.2);
    }
    
    .analysis-card.timing-card:hover {
      border-color: var(--cosmic-teal);
      box-shadow: 0 15px 40px rgba(45, 212, 191, 0.2);
    }
    
    .analysis-card:hover::after {
      left: 100%;
    }
    
    .analysis-card.active {
      border-color: var(--gold);
      background: linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(26, 10, 46, 0.95) 100%);
    }
    
    .analysis-card.timing-card.active {
      border-color: var(--cosmic-teal);
      background: linear-gradient(135deg, rgba(45, 212, 191, 0.15) 0%, rgba(13, 5, 21, 0.95) 100%);
    }
    
    .card-header {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      margin-bottom: 0.8rem;
    }
    
    .card-icon {
      font-size: 2rem;
    }
    
    .card-title {
      font-family: 'Cinzel', serif;
      font-size: 1rem;
      color: var(--gold-light);
      letter-spacing: 0.03em;
    }
    
    .timing-card .card-title {
      color: var(--cosmic-teal);
    }
    
    .card-badge {
      display: inline-block;
      background: linear-gradient(135deg, var(--cosmic-teal), var(--mystic-blue));
      padding: 0.15rem 0.5rem;
      border-radius: 10px;
      font-size: 0.6rem;
      font-family: 'Cinzel', serif;
      margin-left: 0.5rem;
      vertical-align: middle;
    }
    
    .card-desc {
      font-size: 0.95rem;
      color: var(--text-dim);
      line-height: 1.5;
    }
    
    .card-numbers {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.8rem;
      flex-wrap: wrap;
    }
    
    .card-numbers span {
      background: rgba(212, 175, 55, 0.1);
      padding: 0.2rem 0.6rem;
      border-radius: 12px;
      font-size: 0.75rem;
      color: var(--gold);
      font-family: 'Cinzel', serif;
    }
    
    .timing-card .card-numbers span {
      background: rgba(45, 212, 191, 0.1);
      color: var(--cosmic-teal);
    }
    
    /* Result Panel */
    .result-panel {
      display: none;
    }
    
    .result-panel.visible {
      display: block;
      animation: fadeSlideIn 0.6s ease;
    }
    
    .result-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid rgba(212, 175, 55, 0.2);
    }
    
    .result-icon {
      font-size: 3rem;
    }
    
    .result-title {
      font-family: 'Cinzel', serif;
      font-size: 1.5rem;
      color: var(--gold);
      letter-spacing: 0.05em;
    }
    
    .result-subtitle {
      font-size: 0.9rem;
      color: var(--text-dim);
      margin-top: 0.3rem;
    }
    
    .result-content {
      font-size: 1.1rem;
      line-height: 1.9;
      color: var(--text);
    }
    
    .result-content h3 {
      font-family: 'Cinzel', serif;
      color: var(--gold);
      margin: 2rem 0 1rem;
      font-size: 1.2rem;
      letter-spacing: 0.05em;
    }
    
    .result-content p {
      margin-bottom: 1rem;
    }
    
    .result-content strong {
      color: var(--gold-light);
    }
    
    .result-content ul, .result-content ol {
      margin: 1rem 0 1rem 1.5rem;
    }
    
    .result-content li {
      margin-bottom: 0.5rem;
    }
    
    /* Loading State */
    .loading-state {
      text-align: center;
      padding: 4rem 2rem;
    }
    
    .oracle-loader {
      width: 100px;
      height: 100px;
      margin: 0 auto 2rem;
      position: relative;
    }
    
    .oracle-loader .crystal {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 3.5rem;
      animation: crystal-float 2s ease-in-out infinite;
    }
    
    @keyframes crystal-float {
      0%, 100% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -60%) scale(1.1); }
    }
    
    .oracle-loader .ring {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 2px solid transparent;
      border-top-color: var(--gold);
      border-radius: 50%;
      animation: spin 1.5s linear infinite;
    }
    
    .oracle-loader .ring:nth-child(2) {
      width: 80%;
      height: 80%;
      top: 10%;
      left: 10%;
      border-top-color: var(--cosmic-teal);
      animation-duration: 2s;
      animation-direction: reverse;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .loading-text {
      font-family: 'Cinzel', serif;
      color: var(--gold);
      font-size: 1.3rem;
      letter-spacing: 0.1em;
    }
    
    .loading-subtext {
      color: var(--text-dim);
      font-style: italic;
      margin-top: 0.5rem;
      font-size: 1rem;
    }
    
    /* Toast */
    .toast {
      position: fixed;
      bottom: 2rem;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
      color: var(--purple-deep);
      padding: 1rem 2rem;
      border-radius: 30px;
      font-family: 'Cinzel', serif;
      font-weight: 600;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
      z-index: 1000;
      opacity: 0;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    
    .toast.visible {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
    
    /* Divider */
    .divider {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      margin: 2rem 0;
      color: var(--gold);
      font-size: 1.2rem;
    }
    
    .divider::before,
    .divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.4), transparent);
    }
    
    /* Footer */
    footer {
      text-align: center;
      padding: 3rem 1rem;
      color: var(--text-dim);
    }
    
    footer p {
      margin-bottom: 0.5rem;
    }
    
    footer a {
      color: var(--gold);
      text-decoration: none;
    }
    
    /* Responsive */
    @media (max-width: 600px) {
      h1 { font-size: 2rem; }
      .panel { padding: 1.5rem; }
      .numbers-grid { grid-template-columns: repeat(2, 1fr); }
      .analyses-grid { grid-template-columns: 1fr; }
      .form-grid { grid-template-columns: 1fr 1fr; }
    }
  </style>
</head>
<body>
  <div class="bg-container">
    <div class="stars"></div>
    <div class="nebula"></div>
  </div>
  
  <div class="sacred-circle">
    <svg viewBox="0 0 200 200">
      <circle cx="100" cy="100" r="90" fill="none" stroke="currentColor" stroke-width="0.5"/>
      <circle cx="100" cy="100" r="70" fill="none" stroke="currentColor" stroke-width="0.5"/>
      <circle cx="100" cy="100" r="50" fill="none" stroke="currentColor" stroke-width="0.5"/>
      <polygon points="100,10 190,100 100,190 10,100" fill="none" stroke="currentColor" stroke-width="0.5"/>
      <polygon points="100,30 170,100 100,170 30,100" fill="none" stroke="currentColor" stroke-width="0.5"/>
    </svg>
  </div>
  
  <div class="container">
    <header>
      <div class="logo-container">
        <div class="logo-ring"></div>
        <div class="logo-symbol">üîÆ</div>
      </div>
      <div class="version-badge">V3 ‚Äî TIMING SACR√â</div>
      <h1>Life Decoder</h1>
      <p class="subtitle">Num√©rologie Compl√®te & Oracle Temporel</p>
      <p class="powered-by">Propuls√© par <span>Claude Opus 4.5</span> ‚Äî L'IA la plus avanc√©e</p>
    </header>
    
    <!-- API Key -->
    <div class="panel">
      <div class="panel-title">üóùÔ∏è Cl√© API OpenRouter</div>
      <div class="api-section">
        <input type="password" id="apiKey" placeholder="sk-or-..." />
        <button class="btn-gold" onclick="saveApiKey()">Sauvegarder</button>
      </div>
    </div>
    
    <!-- BLOC 1: Identity Input -->
    <div class="panel">
      <div class="panel-title">‚úß Bloc 1 ‚Äî Ton Identit√© ‚úß</div>
      <p class="panel-subtitle">Ta carte num√©rologique de naissance</p>
      <div class="form-grid">
        <div class="form-group">
          <label>Pr√©nom</label>
          <input type="text" id="firstName" placeholder="Marie" oninput="calculateAllNumbers()" />
        </div>
        <div class="form-group">
          <label>Nom</label>
          <input type="text" id="lastName" placeholder="Dupont" oninput="calculateAllNumbers()" />
        </div>
        <div class="form-group">
          <label>Jour</label>
          <input type="number" id="birthDay" min="1" max="31" placeholder="15" oninput="calculateAllNumbers()" />
        </div>
        <div class="form-group">
          <label>Mois</label>
          <select id="birthMonth" onchange="calculateAllNumbers()">
            <option value="">--</option>
            <option value="1">Janvier</option>
            <option value="2">F√©vrier</option>
            <option value="3">Mars</option>
            <option value="4">Avril</option>
            <option value="5">Mai</option>
            <option value="6">Juin</option>
            <option value="7">Juillet</option>
            <option value="8">Ao√ªt</option>
            <option value="9">Septembre</option>
            <option value="10">Octobre</option>
            <option value="11">Novembre</option>
            <option value="12">D√©cembre</option>
          </select>
        </div>
        <div class="form-group">
          <label>Ann√©e</label>
          <input type="number" id="birthYear" min="1900" max="2025" placeholder="1990" oninput="calculateAllNumbers()" />
        </div>
      </div>
    </div>
    
    <!-- BLOC 2: Timing Input -->
    <div class="panel timing-panel">
      <div class="panel-title teal">‚è∞ Bloc 2 ‚Äî Moment de ta Question ‚è∞</div>
      <p class="panel-subtitle">L'√©nergie de l'instant o√π tu consultes l'Oracle</p>
      <div class="form-grid compact">
        <div class="form-group teal">
          <label class="teal">Date question</label>
          <input type="date" id="questionDate" onchange="calculateAllNumbers()" />
        </div>
        <div class="form-group teal">
          <label class="teal">Heure question</label>
          <input type="time" id="questionTime" onchange="calculateAllNumbers()" />
        </div>
        <div class="form-group teal">
          <label class="teal">Date action pr√©vue</label>
          <input type="date" id="actionDate" onchange="calculateAllNumbers()" />
        </div>
        <div class="form-group teal">
          <label class="teal">Heure action</label>
          <input type="time" id="actionTime" onchange="calculateAllNumbers()" />
        </div>
        <div class="form-group teal full-width">
          <label class="teal">Type de question</label>
          <select id="questionType">
            <option value="">-- Choisis --</option>
            <option value="decision">üéØ Prise de d√©cision</option>
            <option value="project">üöÄ Lancement de projet</option>
            <option value="contract">üìù Signature / Contrat</option>
            <option value="love">üíï Amour / Relation</option>
            <option value="career">üíº Carri√®re / Travail</option>
            <option value="money">üí∞ Argent / Investissement</option>
            <option value="move">üè† D√©m√©nagement</option>
            <option value="health">üè• Sant√© / Bien-√™tre</option>
            <option value="other">‚ú® Autre</option>
          </select>
        </div>
        <div class="form-group teal full-width">
          <label class="teal">Contexte / ta question (optionnel)</label>
          <textarea id="questionContext" placeholder="D√©cris ta situation ou ta question..."></textarea>
        </div>
      </div>
    </div>
    
    <!-- Numbers Display -->
    <div class="panel numbers-panel" id="numbersPanel">
      <div class="panel-title">üî¢ Tes Nombres Sacr√©s</div>
      <div class="numbers-grid" id="numbersGrid"></div>
    </div>
    
    <!-- IDENTITY ANALYSES -->
    <div class="section-header">‚úß Analyses d'Identit√© ‚úß</div>
    
    <div class="panel analyses-section">
      <div class="analyses-grid">
        
        <div class="analysis-card" onclick="runAnalysis('life-decoder')">
          <div class="card-header">
            <span class="card-icon">üß¨</span>
            <span class="card-title">Life Decoder Blueprint</span>
          </div>
          <div class="card-desc">Analyse compl√®te de ta personnalit√© profonde, forces cach√©es et purpose ultime</div>
          <div class="card-numbers">
            <span>Chemin de Vie</span>
            <span>Expression</span>
            <span>√Çme</span>
          </div>
        </div>
        
        <div class="analysis-card" onclick="runAnalysis('soul-purpose')">
          <div class="card-header">
            <span class="card-icon">üîÆ</span>
            <span class="card-title">Soul Purpose Finder</span>
          </div>
          <div class="card-desc">D√©couvre ta mission de vie et les actions concr√®tes pour l'accomplir</div>
          <div class="card-numbers">
            <span>√Çme</span>
            <span>R√©alisation</span>
          </div>
        </div>
        
        <div class="analysis-card" onclick="runAnalysis('expression-profile')">
          <div class="card-header">
            <span class="card-icon">üéØ</span>
            <span class="card-title">Expression Profile</span>
          </div>
          <div class="card-desc">Tes talents inn√©s et capacit√©s naturelles encod√©s dans ton nom</div>
          <div class="card-numbers">
            <span>Expression</span>
            <span>Force Cach√©e</span>
          </div>
        </div>
        
        <div class="analysis-card" onclick="runAnalysis('career-destiny')">
          <div class="card-header">
            <span class="card-icon">üíº</span>
            <span class="card-title">Career Destiny Finder</span>
          </div>
          <div class="card-desc">Les 3 chemins de carri√®re o√π tu excelleras + celui √† √©viter</div>
          <div class="card-numbers">
            <span>Expression</span>
            <span>Chemin de Vie</span>
          </div>
        </div>
        
        <div class="analysis-card" onclick="runAnalysis('relationship-map')">
          <div class="card-header">
            <span class="card-icon">üíï</span>
            <span class="card-title">Relationship Destiny Map</span>
          </div>
          <div class="card-desc">Ton partenaire id√©al et karma amoureux</div>
          <div class="card-numbers">
            <span>√Çme</span>
            <span>Personnalit√©</span>
          </div>
        </div>
        
        <div class="analysis-card" onclick="runAnalysis('wealth-code')">
          <div class="card-header">
            <span class="card-icon">üí∞</span>
            <span class="card-title">Wealth & Abundance Code</span>
          </div>
          <div class="card-desc">Ta strat√©gie personnalis√©e pour attirer l'abondance</div>
          <div class="card-numbers">
            <span>Expression</span>
            <span>Chemin de Vie</span>
          </div>
        </div>
        
        <div class="analysis-card" onclick="runAnalysis('complete-chart')">
          <div class="card-header">
            <span class="card-icon">üìä</span>
            <span class="card-title">Th√®me Complet</span>
          </div>
          <div class="card-desc">Analyse EXHAUSTIVE de tous tes nombres sacr√©s</div>
          <div class="card-numbers">
            <span>TOUS</span>
          </div>
        </div>
        
      </div>
    </div>
    
    <!-- TIMING ANALYSES -->
    <div class="section-header teal">‚è∞ Analyses Temporelles ‚è∞</div>
    
    <div class="panel analyses-section">
      <div class="analyses-grid">
        
        <div class="analysis-card timing-card" onclick="runAnalysis('decision-oracle')">
          <div class="card-header">
            <span class="card-icon">‚ö°</span>
            <span class="card-title">Decision Timing Oracle <span class="card-badge">NEW</span></span>
          </div>
          <div class="card-desc">Le meilleur moment pour agir : jours √† favoriser, heures optimales et fen√™tre d'action id√©ale</div>
          <div class="card-numbers">
            <span>Jour Question</span>
            <span>Jour Action</span>
            <span>Ann√©e Perso</span>
          </div>
        </div>
        
        <div class="analysis-card timing-card" onclick="runAnalysis('daily-alignment')">
          <div class="card-header">
            <span class="card-icon">üåÖ</span>
            <span class="card-title">Daily Alignment Guide <span class="card-badge">NEW</span></span>
          </div>
          <div class="card-desc">√ânergie du jour et de l'instant, message du moment, conseils d'actions concr√®tes</div>
          <div class="card-numbers">
            <span>Chiffre Jour</span>
            <span>Chiffre Heure</span>
            <span>Ann√©e Perso</span>
          </div>
        </div>
        
        <div class="analysis-card timing-card" onclick="runAnalysis('future-timeline')">
          <div class="card-header">
            <span class="card-icon">üìÖ</span>
            <span class="card-title">Future Timeline Guide</span>
          </div>
          <div class="card-desc">Ta roadmap des 5 prochaines ann√©es avec les turning points cl√©s</div>
          <div class="card-numbers">
            <span>Ann√©e Perso</span>
            <span>Cycles</span>
          </div>
        </div>
        
      </div>
    </div>
    
    <!-- Result -->
    <div class="panel result-panel" id="resultPanel">
      <div class="loading-state" id="loadingState">
        <div class="oracle-loader">
          <div class="ring"></div>
          <div class="ring"></div>
          <span class="crystal">üîÆ</span>
        </div>
        <div class="loading-text">L'Oracle consulte les astres...</div>
        <div class="loading-subtext">Claude Opus 4.5 analyse ta destin√©e</div>
      </div>
      
      <div id="resultContent" style="display: none;">
        <div class="result-header">
          <span class="result-icon" id="resultIcon">üß¨</span>
          <div>
            <h3 class="result-title" id="resultTitle">Life Decoder Blueprint</h3>
            <p class="result-subtitle" id="resultSubtitle"></p>
          </div>
        </div>
        <div class="result-content" id="resultText"></div>
      </div>
    </div>
    
    <footer>
      <p>‚ú¶ Cr√©√© avec la puissance des √©toiles ‚ú¶</p>
      <p style="font-size: 0.9rem;">Propuls√© par <a href="https://openrouter.ai" target="_blank">OpenRouter</a> & Claude Opus 4.5</p>
    </footer>
  </div>
  
  <div class="toast" id="toast"></div>

  <script>
    // === NUMEROLOGY TABLES ===
    const LETTER_VALUES = {
      'A': 1, 'J': 1, 'S': 1,
      'B': 2, 'K': 2, 'T': 2,
      'C': 3, 'L': 3, 'U': 3,
      'D': 4, 'M': 4, 'V': 4,
      'E': 5, 'N': 5, 'W': 5,
      'F': 6, 'O': 6, 'X': 6,
      'G': 7, 'P': 7, 'Y': 7,
      'H': 8, 'Q': 8, 'Z': 8,
      'I': 9, 'R': 9
    };
    
    const VOWELS = ['A', 'E', 'I', 'O', 'U', 'Y'];
    
    // === STATE ===
    let currentNumbers = {};
    let temporalNumbers = {};
    
    // === INIT ===
    document.getElementById('apiKey').value = localStorage.getItem('openrouter_key') || '';
    
    // Auto-fill current date/time
    const now = new Date();
    document.getElementById('questionDate').value = now.toISOString().split('T')[0];
    document.getElementById('questionTime').value = now.toTimeString().slice(0, 5);
    
    // Load saved data
    const saved = JSON.parse(localStorage.getItem('userData') || '{}');
    if (saved.firstName) document.getElementById('firstName').value = saved.firstName;
    if (saved.lastName) document.getElementById('lastName').value = saved.lastName;
    if (saved.day) document.getElementById('birthDay').value = saved.day;
    if (saved.month) document.getElementById('birthMonth').value = saved.month;
    if (saved.year) document.getElementById('birthYear').value = saved.year;
    
    calculateAllNumbers();
    
    // === API ===
    function saveApiKey() {
      localStorage.setItem('openrouter_key', document.getElementById('apiKey').value);
      showToast('‚ú® Cl√© API sauvegard√©e !');
    }
    
    // === NUMEROLOGY CALCULATIONS ===
    function reduceToSingle(num, keepMaster = true) {
      while (num > 9) {
        if (keepMaster && (num === 11 || num === 22 || num === 33)) break;
        num = num.toString().split('').reduce((a, b) => a + parseInt(b), 0);
      }
      return num;
    }
    
    function getLetterSum(text, filter = null) {
      const letters = text.toUpperCase().replace(/[^A-Z]/g, '').split('');
      let filtered = letters;
      
      if (filter === 'vowels') {
        filtered = letters.filter(l => VOWELS.includes(l));
      } else if (filter === 'consonants') {
        filtered = letters.filter(l => !VOWELS.includes(l));
      }
      
      const values = filtered.map(l => LETTER_VALUES[l] || 0);
      const sum = values.reduce((a, b) => a + b, 0);
      
      return {
        letters: filtered.join(''),
        values: values.join('+'),
        sum: sum,
        reduced: reduceToSingle(sum)
      };
    }
    
    function calculateLifePath(day, month, year) {
      const d = reduceToSingle(day, false);
      const m = reduceToSingle(month, false);
      const y = reduceToSingle(year, false);
      const total = d + m + y;
      
      return {
        calculation: `${day}‚Üí${d} + ${month}‚Üí${m} + ${year}‚Üí${y} = ${total}`,
        value: reduceToSingle(total)
      };
    }
    
    function calculatePersonalYear(day, month, currentYear) {
      const d = reduceToSingle(day, false);
      const m = reduceToSingle(month, false);
      const y = reduceToSingle(currentYear, false);
      const total = d + m + y;
      
      return {
        calculation: `${day}‚Üí${d} + ${month}‚Üí${m} + ${currentYear}‚Üí${y}`,
        value: reduceToSingle(total)
      };
    }
    
    function calculateDayNumber(dateStr) {
      if (!dateStr) return null;
      const [year, month, day] = dateStr.split('-').map(Number);
      const sum = day + month + year;
      return {
        calculation: `${day}+${month}+${year}=${sum}`,
        value: reduceToSingle(sum)
      };
    }
    
    function calculateHourNumber(timeStr) {
      if (!timeStr) return null;
      const [hours, minutes] = timeStr.split(':').map(Number);
      const sum = hours + minutes;
      return {
        calculation: `${hours}h${minutes}‚Üí${sum}`,
        value: reduceToSingle(sum)
      };
    }
    
    function findHiddenPower(fullName) {
      const letters = fullName.toUpperCase().replace(/[^A-Z]/g, '').split('');
      const counts = {};
      
      letters.forEach(l => {
        const val = LETTER_VALUES[l];
        counts[val] = (counts[val] || 0) + 1;
      });
      
      let maxCount = 0;
      let powerNumber = 1;
      
      for (const [num, count] of Object.entries(counts)) {
        if (count > maxCount) {
          maxCount = count;
          powerNumber = parseInt(num);
        }
      }
      
      return {
        value: powerNumber,
        count: maxCount
      };
    }
    
    function calculateAllNumbers() {
      const firstName = document.getElementById('firstName').value.trim();
      const lastName = document.getElementById('lastName').value.trim();
      const day = parseInt(document.getElementById('birthDay').value);
      const month = parseInt(document.getElementById('birthMonth').value);
      const year = parseInt(document.getElementById('birthYear').value);
      
      // Temporal inputs
      const questionDate = document.getElementById('questionDate').value;
      const questionTime = document.getElementById('questionTime').value;
      const actionDate = document.getElementById('actionDate').value;
      const actionTime = document.getElementById('actionTime').value;
      
      // Save identity data
      localStorage.setItem('userData', JSON.stringify({
        firstName, lastName, day, month, year
      }));
      
      // Need at least name OR birthdate
      const hasName = firstName && lastName;
      const hasBirth = day && month && year;
      
      if (!hasName && !hasBirth && !questionDate) {
        document.getElementById('numbersPanel').classList.remove('visible');
        return;
      }
      
      const fullName = `${firstName} ${lastName}`;
      currentNumbers = {};
      temporalNumbers = {};
      
      // === IDENTITY NUMBERS ===
      if (hasBirth) {
        const lp = calculateLifePath(day, month, year);
        currentNumbers.lifePath = {
          icon: 'üõ§Ô∏è',
          label: 'Chemin de Vie',
          value: lp.value,
          calc: lp.calculation,
          master: [11, 22, 33].includes(lp.value),
          temporal: false
        };
        
        const currentYear = new Date().getFullYear();
        const py = calculatePersonalYear(day, month, currentYear);
        currentNumbers.personalYear = {
          icon: 'üìÖ',
          label: `Ann√©e ${currentYear}`,
          value: py.value,
          calc: py.calculation,
          master: false,
          temporal: false
        };
      }
      
      if (hasName) {
        const expr = getLetterSum(fullName);
        currentNumbers.expression = {
          icon: 'üéØ',
          label: 'Expression',
          value: expr.reduced,
          calc: `${expr.sum}‚Üí${expr.reduced}`,
          master: [11, 22, 33].includes(expr.reduced),
          temporal: false
        };
        
        const soul = getLetterSum(fullName, 'vowels');
        currentNumbers.soul = {
          icon: '‚ù§Ô∏è',
          label: '√Çme',
          value: soul.reduced,
          calc: `Voyelles: ${soul.sum}`,
          master: [11, 22, 33].includes(soul.reduced),
          temporal: false
        };
        
        const pers = getLetterSum(fullName, 'consonants');
        currentNumbers.personality = {
          icon: 'üé≠',
          label: 'Personnalit√©',
          value: pers.reduced,
          calc: `Consonnes: ${pers.sum}`,
          master: [11, 22, 33].includes(pers.reduced),
          temporal: false
        };
        
        const power = findHiddenPower(fullName);
        currentNumbers.hiddenPower = {
          icon: '‚ö°',
          label: 'Force Cach√©e',
          value: power.value,
          calc: `√ó${power.count} fois`,
          master: false,
          temporal: false
        };
      }
      
      if (hasName && hasBirth) {
        const realization = reduceToSingle(currentNumbers.lifePath.value + currentNumbers.expression.value);
        currentNumbers.realization = {
          icon: 'üí´',
          label: 'R√©alisation',
          value: realization,
          calc: `${currentNumbers.lifePath.value}+${currentNumbers.expression.value}`,
          master: [11, 22, 33].includes(realization),
          temporal: false
        };
      }
      
      // === TEMPORAL NUMBERS ===
      if (questionDate) {
        const qd = calculateDayNumber(questionDate);
        temporalNumbers.questionDay = {
          icon: 'üìÜ',
          label: 'Jour Question',
          value: qd.value,
          calc: qd.calculation,
          master: false,
          temporal: true
        };
      }
      
      if (questionTime) {
        const qt = calculateHourNumber(questionTime);
        temporalNumbers.questionHour = {
          icon: 'üïê',
          label: 'Heure Question',
          value: qt.value,
          calc: qt.calculation,
          master: false,
          temporal: true
        };
      }
      
      if (actionDate) {
        const ad = calculateDayNumber(actionDate);
        temporalNumbers.actionDay = {
          icon: 'üéØ',
          label: 'Jour Action',
          value: ad.value,
          calc: ad.calculation,
          master: false,
          temporal: true
        };
      }
      
      if (actionTime) {
        const at = calculateHourNumber(actionTime);
        temporalNumbers.actionHour = {
          icon: '‚è∞',
          label: 'Heure Action',
          value: at.value,
          calc: at.calculation,
          master: false,
          temporal: true
        };
      }
      
      renderNumbers();
    }
    
    function renderNumbers() {
      const grid = document.getElementById('numbersGrid');
      const panel = document.getElementById('numbersPanel');
      
      const allNumbers = { ...currentNumbers, ...temporalNumbers };
      
      if (Object.keys(allNumbers).length === 0) {
        panel.classList.remove('visible');
        return;
      }
      
      panel.classList.add('visible');
      grid.innerHTML = '';
      
      for (const [key, data] of Object.entries(allNumbers)) {
        const card = document.createElement('div');
        card.className = 'number-card' + (data.temporal ? ' temporal' : '');
        card.innerHTML = `
          ${data.master ? '<span class="master-badge">MA√éTRE</span>' : ''}
          <div class="icon">${data.icon}</div>
          <div class="value ${data.master ? 'master' : ''}">${data.value}</div>
          <div class="label">${data.label}</div>
          <div class="calculation">${data.calc}</div>
        `;
        grid.appendChild(card);
      }
    }
    
    // === ANALYSES ===
    const ANALYSES = {
      'life-decoder': {
        icon: 'üß¨',
        title: 'Life Decoder Blueprint',
        prompt: (n, t, info) => `Tu es un ma√Ætre num√©rologue avec 40 ans d'exp√©rience. Analyse cette personne:

IDENTIT√â: ${info.fullName}
DATE DE NAISSANCE: ${info.birthdate}

NOMBRES SACR√âS:
${n.lifePath ? `‚Ä¢ Chemin de Vie: ${n.lifePath.value} ${n.lifePath.master ? '(NOMBRE MA√éTRE!)' : ''}` : ''}
${n.expression ? `‚Ä¢ Expression: ${n.expression.value} ${n.expression.master ? '(NOMBRE MA√éTRE!)' : ''}` : ''}
${n.soul ? `‚Ä¢ Nombre de l'√Çme: ${n.soul.value}` : ''}
${n.personality ? `‚Ä¢ Personnalit√©: ${n.personality.value}` : ''}
${n.realization ? `‚Ä¢ R√©alisation: ${n.realization.value}` : ''}
${n.hiddenPower ? `‚Ä¢ Force Cach√©e: ${n.hiddenPower.value}` : ''}

D√©livre une analyse COMPL√àTE et PROFONDE.

Structure:
1. **Portrait Profond** - Qui est vraiment cette personne
2. **Forces Cach√©es** - Pouvoirs qu'elle ne soup√ßonne pas
3. **Zones d'Ombre** - Ce qui la freine (honn√™te mais bienveillant)
4. **Blueprint de Destin√©e** - Le chemin qu'elle doit emprunter
5. **Purpose Ultime** - LA mission pour laquelle elle est n√©e

Sois pr√©cis, personnel et mystique. Utilise "tu/toi".`
      },
      
      'soul-purpose': {
        icon: 'üîÆ',
        title: 'Soul Purpose Finder',
        prompt: (n, t, info) => `Tu es un guide spirituel expert en num√©rologie de l'√¢me.

IDENTIT√â: ${info.fullName}
DATE: ${info.birthdate}
NOMBRE DE L'√ÇME: ${n.soul?.value || 'N/A'}
R√âALISATION: ${n.realization?.value || 'N/A'}
CHEMIN DE VIE: ${n.lifePath?.value || 'N/A'}

R√©v√®le la MISSION DE L'√ÇME.

Structure:
1. **Mission Sacr√©e** - Pourquoi ton √¢me a choisi cette vie
2. **Le√ßons Karmiques** - Ce que tu es venu(e) apprendre
3. **Don au Monde** - Ta contribution unique
4. **Alignement Quotidien** - Actions concr√®tes
5. **Signes d'Alignement** - Comment savoir que tu es sur le bon chemin`
      },
      
      'expression-profile': {
        icon: 'üéØ',
        title: 'Expression Profile',
        prompt: (n, t, info) => `Tu es un expert en num√©rologie du nom.

NOM COMPLET: ${info.fullName}
EXPRESSION: ${n.expression?.value || 'N/A'} ${n.expression?.master ? '(NOMBRE MA√éTRE!)' : ''}
FORCE CACH√âE: ${n.hiddenPower?.value || 'N/A'}

Analyse les TALENTS INN√âS encod√©s dans le nom.

Structure:
1. **Talents Naturels** - Capacit√©s de naissance
2. **Mode d'Expression** - Comment tu te manifestes
3. **Super-Pouvoir Cach√©** - Bas√© sur la Force Cach√©e
4. **Blocages Potentiels** - Ce qui peut freiner
5. **Activation** - Comment lib√©rer ces talents`
      },
      
      'career-destiny': {
        icon: 'üíº',
        title: 'Career Destiny Finder',
        prompt: (n, t, info) => `Tu es un conseiller de carri√®re num√©rologue.

PERSONNE: ${info.fullName}
EXPRESSION: ${n.expression?.value || 'N/A'}
CHEMIN DE VIE: ${n.lifePath?.value || 'N/A'}
R√âALISATION: ${n.realization?.value || 'N/A'}

Structure:
1. **Atouts Professionnels** - Ce qui te rend unique
2. **Carri√®re #1** - Chemin optimal
3. **Carri√®re #2** - Alternative cr√©ative
4. **Carri√®re #3** - Option audacieuse
5. **√Ä √âVITER** - Domaine o√π tu gal√®reras
6. **Prochaines √âtapes** - Actions concr√®tes`
      },
      
      'relationship-map': {
        icon: 'üíï',
        title: 'Relationship Destiny Map',
        prompt: (n, t, info) => `Tu es un expert en compatibilit√© num√©rologique.

PERSONNE: ${info.fullName}
√ÇME: ${n.soul?.value || 'N/A'}
PERSONNALIT√â: ${n.personality?.value || 'N/A'}
CHEMIN DE VIE: ${n.lifePath?.value || 'N/A'}

Structure:
1. **Style Amoureux** - Comment tu aimes
2. **Partenaire Id√©al** - Description pr√©cise
3. **Karma Relationnel** - Patterns √† briser
4. **Le√ßons d'Amour** - Ce que les relations t'enseignent
5. **Red Flags** - Types √† √©viter
6. **Attirer l'Amour** - Conseils pratiques`
      },
      
      'wealth-code': {
        icon: 'üí∞',
        title: 'Wealth & Abundance Code',
        prompt: (n, t, info) => `Tu es un expert en num√©rologie financi√®re.

PERSONNE: ${info.fullName}
EXPRESSION: ${n.expression?.value || 'N/A'}
CHEMIN DE VIE: ${n.lifePath?.value || 'N/A'}
ANN√âE PERSONNELLE: ${n.personalYear?.value || 'N/A'}

Structure:
1. **Relation √† l'Argent** - Money personality
2. **Dons d'Abondance** - Comment l'argent vient √† toi
3. **Blocages** - Ce qui sabote ta prosp√©rit√©
4. **Strat√©gie Wealth** - Approche pour TOI
5. **Erreurs √† √âviter** - Pi√®ges financiers
6. **Rituels d'Abondance** - Pratiques quotidiennes`
      },
      
      'complete-chart': {
        icon: 'üìä',
        title: 'Th√®me Num√©rologique Complet',
        prompt: (n, t, info) => `Tu es un Grand Ma√Ætre Num√©rologue. Cr√©e un TH√àME COMPLET.

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
IDENTIT√â: ${info.fullName}
DATE DE NAISSANCE: ${info.birthdate}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

TOUS LES NOMBRES:
${Object.entries(n).map(([k, v]) => `‚Ä¢ ${v.label}: ${v.value} ${v.master ? '‚≠ê MA√éTRE' : ''}`).join('\n')}

Cr√©e une analyse EXHAUSTIVE:

1. **VUE D'ENSEMBLE** - Portrait global
2. **CHEMIN DE VIE ${n.lifePath?.value || '?'}** - Direction, d√©fis, le√ßons
3. **EXPRESSION ${n.expression?.value || '?'}** - Talents, potentiel
4. **√ÇME ${n.soul?.value || '?'}** - D√©sirs profonds
5. **PERSONNALIT√â ${n.personality?.value || '?'}** - Image sociale
6. **R√âALISATION ${n.realization?.value || '?'}** - Accomplissement
7. **FORCE CACH√âE ${n.hiddenPower?.value || '?'}** - Super-pouvoir
8. **ANN√âE PERSONNELLE ${n.personalYear?.value || '?'}** - Cycle actuel
9. **SYNTH√àSE** - Comment les nombres interagissent
10. **MESSAGE DE L'UNIVERS** - Message personnel puissant`
      },
      
      // === TEMPORAL ANALYSES ===
      'decision-oracle': {
        icon: '‚ö°',
        title: 'Decision Timing Oracle',
        prompt: (n, t, info) => `Tu es un Oracle du Timing sp√©cialis√© en num√©rologie temporelle.

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
CONSULTANT: ${info.fullName}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

PROFIL NUM√âROLOGIQUE:
‚Ä¢ Chemin de Vie: ${n.lifePath?.value || 'N/A'}
‚Ä¢ Ann√©e Personnelle ${new Date().getFullYear()}: ${n.personalYear?.value || 'N/A'}
‚Ä¢ Expression: ${n.expression?.value || 'N/A'}

DONN√âES TEMPORELLES:
‚Ä¢ Date de la question: ${info.questionDate || 'Non sp√©cifi√©e'}
‚Ä¢ Heure de la question: ${info.questionTime || 'Non sp√©cifi√©e'}
‚Ä¢ Chiffre du jour de la question: ${t.questionDay?.value || 'N/A'}
‚Ä¢ Chiffre de l'heure de la question: ${t.questionHour?.value || 'N/A'}
‚Ä¢ Date de l'action pr√©vue: ${info.actionDate || 'Non sp√©cifi√©e'}
‚Ä¢ Chiffre du jour de l'action: ${t.actionDay?.value || 'N/A'}
‚Ä¢ Chiffre de l'heure de l'action: ${t.actionHour?.value || 'N/A'}

TYPE DE QUESTION: ${info.questionType || 'Non sp√©cifi√©'}
CONTEXTE: ${info.context || 'Aucun contexte fourni'}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

MISSION: Analyse l'alignement entre les cycles personnels et les dates envisag√©es. Donne une recommandation claire GO / ATTENDS / AJUSTE.

Structure ta r√©ponse:

1. **√âNERGIE DU MOMENT** - Analyse du jour/heure o√π la question est pos√©e
2. **COMPATIBILIT√â TEMPORELLE** - La date d'action pr√©vue est-elle align√©e avec ses cycles?
3. **VERDICT CLAIR** - üü¢ GO / üü° ATTENDS / üî¥ AJUSTE (avec explication)
4. **FEN√äTRE OPTIMALE** - Si pas maintenant, quand? (jours favorables ce mois)
5. **HEURES PROPICES** - Meilleures heures pour agir
6. **3 CONSEILS D'ALIGNEMENT** - Actions concr√®tes pour maximiser les chances
7. **PHRASE DE SYNTH√àSE SPIRITUELLE** - Un message de guidance

Sois pr√©cis, pratique et mystique. Donne des DATES et HEURES concr√®tes.`
      },
      
      'daily-alignment': {
        icon: 'üåÖ',
        title: 'Daily Alignment Guide',
        prompt: (n, t, info) => `Tu es un Guide d'Alignement Quotidien expert en num√©rologie temporelle.

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
CONSULTANT: ${info.fullName}
DATE D'AUJOURD'HUI: ${info.questionDate}
HEURE ACTUELLE: ${info.questionTime}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

PROFIL:
‚Ä¢ Chemin de Vie: ${n.lifePath?.value || 'N/A'}
‚Ä¢ Ann√©e Personnelle: ${n.personalYear?.value || 'N/A'}
‚Ä¢ Expression: ${n.expression?.value || 'N/A'}
‚Ä¢ √Çme: ${n.soul?.value || 'N/A'}

√âNERGIES DU MOMENT:
‚Ä¢ Chiffre du jour: ${t.questionDay?.value || 'N/A'}
‚Ä¢ Chiffre de l'heure: ${t.questionHour?.value || 'N/A'}
‚Ä¢ Vibration combin√©e jour+heure: ${t.questionDay && t.questionHour ? reduceToSingle(t.questionDay.value + t.questionHour.value) : 'N/A'}

${info.questionType ? `TYPE DE QUESTION: ${info.questionType}` : ''}
${info.context ? `CONTEXTE: ${info.context}` : ''}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

MISSION: Donne un guide complet pour cette journ√©e et cet instant pr√©cis.

Structure:

1. **MESSAGE DU JOUR** - L'√©nergie globale de cette journ√©e pour cette personne
2. **MESSAGE DE L'INSTANT** - Ce que signifie le moment o√π elle consulte
3. **ALIGNEMENT PERSONNEL** - Comment cette √©nergie interagit avec son profil
4. **√Ä FAVORISER AUJOURD'HUI** - Actions, d√©cisions, activit√©s recommand√©es
5. **√Ä √âVITER AUJOURD'HUI** - Ce qu'il vaut mieux reporter
6. **HEURES CL√âS** - Les moments les plus favorables de la journ√©e
7. **MANTRA DU JOUR** - Une phrase √† se r√©p√©ter
8. **CONSEIL PRATIQUE** - Une action concr√®te √† faire MAINTENANT

Sois inspirant, pr√©cis et actionnable.`
      },
      
      'future-timeline': {
        icon: 'üìÖ',
        title: 'Future Timeline Guide',
        prompt: (n, t, info) => `Tu es un visionnaire num√©rologue expert en cycles.

PERSONNE: ${info.fullName}
CHEMIN DE VIE: ${n.lifePath?.value || 'N/A'}
ANN√âE PERSONNELLE ${new Date().getFullYear()}: ${n.personalYear?.value || 'N/A'}

L'Ann√©e Personnelle cr√©e des cycles de 9 ans.

ROADMAP des 5 prochaines ann√©es:

1. **Cycle Actuel** - Position dans le cycle de 9 ans
2. **${new Date().getFullYear()}** - Th√®me et √©v√©nements cl√©s
3. **${new Date().getFullYear() + 1}** - Th√®me et √©v√©nements
4. **${new Date().getFullYear() + 2}** - Point tournant?
5. **${new Date().getFullYear() + 3}** - Th√®me et √©v√©nements
6. **${new Date().getFullYear() + 4}** - Th√®me et √©v√©nements
7. **JOURS FAVORABLES** - Dates cl√©s √† retenir chaque ann√©e
8. **Vision Long Terme** - Ce que ces 5 ans pr√©parent`
      }
    };
    
    function getInfo() {
      const firstName = document.getElementById('firstName').value.trim();
      const lastName = document.getElementById('lastName').value.trim();
      const day = document.getElementById('birthDay').value;
      const month = document.getElementById('birthMonth').value;
      const year = document.getElementById('birthYear').value;
      
      const questionDate = document.getElementById('questionDate').value;
      const questionTime = document.getElementById('questionTime').value;
      const actionDate = document.getElementById('actionDate').value;
      const actionTime = document.getElementById('actionTime').value;
      const questionType = document.getElementById('questionType').value;
      const context = document.getElementById('questionContext').value;
      
      const monthNames = ['', 'Janvier', 'F√©vrier', 'Mars', 'Avril', 'Mai', 'Juin', 
                          'Juillet', 'Ao√ªt', 'Septembre', 'Octobre', 'Novembre', 'D√©cembre'];
      
      const typeLabels = {
        'decision': 'Prise de d√©cision',
        'project': 'Lancement de projet',
        'contract': 'Signature / Contrat',
        'love': 'Amour / Relation',
        'career': 'Carri√®re / Travail',
        'money': 'Argent / Investissement',
        'move': 'D√©m√©nagement',
        'health': 'Sant√© / Bien-√™tre',
        'other': 'Autre'
      };
      
      return {
        fullName: `${firstName} ${lastName}`.trim() || 'Inconnu',
        birthdate: day && month && year ? `${day} ${monthNames[parseInt(month)]} ${year}` : 'Non fournie',
        questionDate: questionDate || null,
        questionTime: questionTime || null,
        actionDate: actionDate || null,
        actionTime: actionTime || null,
        questionType: typeLabels[questionType] || null,
        context: context || null
      };
    }
    
    async function runAnalysis(type) {
      const apiKey = document.getElementById('apiKey').value.trim();
      if (!apiKey) {
        showToast('‚ùå Entre ta cl√© API !');
        return;
      }
      
      const info = getInfo();
      const analysis = ANALYSES[type];
      
      // Check requirements
      if (Object.keys(currentNumbers).length === 0 && Object.keys(temporalNumbers).length === 0) {
        showToast('‚ùå Remplis au moins une section !');
        return;
      }
      
      const prompt = analysis.prompt(currentNumbers, temporalNumbers, info);
      
      // Show loading
      const panel = document.getElementById('resultPanel');
      const loading = document.getElementById('loadingState');
      const content = document.getElementById('resultContent');
      
      panel.classList.add('visible');
      loading.style.display = 'block';
      content.style.display = 'none';
      
      // Highlight card
      document.querySelectorAll('.analysis-card').forEach(c => c.classList.remove('active'));
      event.currentTarget.classList.add('active');
      
      // Scroll to result
      panel.scrollIntoView({ behavior: 'smooth', block: 'start' });
      
      try {
        const res = await fetch("https://openrouter.ai/api/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer " + apiKey,
            "HTTP-Referer": window.location.href,
            "X-Title": "Life Decoder Pro V3"
          },
          body: JSON.stringify({
            model: "anthropic/claude-opus-4",
            messages: [
              {
                role: "system",
                content: `Tu es un Ma√Ætre Num√©rologue l√©gendaire et Oracle du Timing avec 40 ans d'exp√©rience. Tes lectures sont c√©l√®bres pour √™tre incroyablement pr√©cises et profond√©ment transformatrices. Tu combines sagesse ancienne, num√©rologie pythagoricienne, et intuition mystique. Tu parles toujours en fran√ßais, avec un ton mystique mais accessible. Tu utilises "tu/toi" pour cr√©er de l'intimit√©. Tes analyses sont d√©taill√©es, personnelles, et touchent l'√¢me. Quand tu donnes des conseils de timing, tu es PR√âCIS avec des dates et heures concr√®tes.`
              },
              {
                role: "user",
                content: prompt
              }
            ],
            max_tokens: 4000,
            temperature: 0.8
          })
        });
        
        if (!res.ok) {
          const errData = await res.json().catch(() => ({}));
          throw new Error(errData.error?.message || `Erreur ${res.status}`);
        }
        
        const data = await res.json();
        const text = data.choices?.[0]?.message?.content || "Aucune r√©ponse re√ßue.";
        
        // Display
        loading.style.display = 'none';
        content.style.display = 'block';
        
        document.getElementById('resultIcon').textContent = analysis.icon;
        document.getElementById('resultTitle').textContent = analysis.title;
        document.getElementById('resultSubtitle').textContent = `Pour ${info.fullName}`;
        document.getElementById('resultText').innerHTML = formatResult(text);
        
      } catch (err) {
        console.error(err);
        loading.style.display = 'none';
        showToast('‚ùå ' + err.message);
      }
    }
    
    function formatResult(text) {
      return text
        .replace(/\*\*\*(.+?)\*\*\*/g, '<h3>‚ú¶ $1</h3>')
        .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
        .replace(/^### (.+)$/gm, '<h3>‚ú¶ $1</h3>')
        .replace(/^## (.+)$/gm, '<h3>‚ú¶ $1</h3>')
        .replace(/^\* (.+)$/gm, '<li>$1</li>')
        .replace(/^- (.+)$/gm, '<li>$1</li>')
        .replace(/\n\n/g, '</p><p>')
        .replace(/\n/g, '<br>')
        .replace(/^/, '<p>')
        .replace(/$/, '</p>')
        .replace(/<p><li>/g, '<ul><li>')
        .replace(/<\/li><\/p>/g, '</li></ul>');
    }
    
    function showToast(msg) {
      const toast = document.getElementById('toast');
      toast.textContent = msg;
      toast.classList.add('visible');
      setTimeout(() => toast.classList.remove('visible'), 3000);
    }
  </script>
</body>
</html>
